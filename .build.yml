# See CI documentation: https://doc.rust-lang.org/cargo/guide/continuous-integration.html#buildssrht
image: archlinux
packages:
    - rustup
sources:
    - https://git.sr.ht/~vlnk/bookmarkt
tasks:
    - setup: |
        rustup toolchain install nightly
        rustup toolchain install stable
        cd bookmarkt
        rustup run nightly cargo fetch
    - nightly: |
        rustup default nightly
        cd bookmarkt
        cargo build --verbose
        cargo test --verbose
    - stable: |
        rustup default stable
        cd bookmarkt
        cargo build --verbose
        cargo test --verbose
